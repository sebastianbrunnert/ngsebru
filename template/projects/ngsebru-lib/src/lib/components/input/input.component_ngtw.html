<ng-container *ngIf="this.input && this.input!.type.toString() == 'checkbox'">
    <div class="flex mt-2">
        <input 
            (ngModelChange)="this.input!.onInput($event)" 
            [disabled]="this.input!.disabled.toString()" 
            [(ngModel)]="this.input!.value" 
            type="checkbox" 
            id="input-{{this.input!.id}}" 
            class="bg-gray-50 border border-gray-300 p-2.5 focus:outline-none focus:ring-0">

        <label for="input-{{this.input!.id}}" class="ml-2 text-gray-900" *ngIf="this.input!.label != ''">
            <span [innerHtml]="this.input!.label.toString()|lang|safeHtml"></span>
            <span *ngIf="!this.input!.required && this.input.showOptional">({{"INPUT_DEFAULT_OPTIONAL"|lang}})</span>
        </label>
    </div>
    <label class="block text-sm mt-1 font-light text-gray-500" *ngIf="this.input!.description != ''">{{input!.description|lang}}</label>
    <p class="mt-2 text-sm text-red-600">{{this.input!.mark | lang}}</p>
</ng-container>

<ng-container *ngIf="this.input && this.input!.type.toString() != 'checkbox'">
    <label for="input" class="block font-medium text-gray-900" *ngIf="this.input!.label != ''">{{this.input!.label|lang}}
        <span *ngIf="!this.input!.required && this.input.showOptional">({{"INPUT_DEFAULT_OPTIONAL"|lang}})</span>
    </label>
    <label class="block text-sm mt-1 font-light text-gray-500" *ngIf="this.input!.description != ''">
        {{this.input!.description|lang}}
    </label>
    <div class="flex mt-2">
        <span class="inline-flex items-center px-3 text-sm text-gray-900 bg-gray-200 border border-r-0 border-gray-300 rounded-l-md" *ngIf="this.input!.prefix">
            {{this.input!.prefix}}
        </span>

        <div class="relative w-full">
            <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none" *ngIf="this.input!.icon != ''" (click)="this.input.onIconClick()">
                <ngs-icon [type]="this.input!.icon"></ngs-icon>
            </div>

            <ng-container [ngSwitch]="this.input!.type.toString()">

                <input 
                    (ngModelChange)="this.input!.onInput($event)" 
                    (focus)="this.input!.onInputFocus()" 
                    [disabled]="this.input!.disabled.toString()" 
                    [(ngModel)]="this.input!.value" 
                    (keydown.enter)="this.input!.standalone ? this.input!.submit() : null" 
                    type="text" 
                    id="input-{{this.input!.id}}" 
                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm block w-full p-2.5 focus:outline-none focus:ring-0" 
                    [class.rounded-l-lg]="!this.input!.prefix" 
                    [class.rounded-r-lg]="!this.input!.suffix" 
                    [class.bg-gray-100]="this.input!.disabled" 
                    [class.cursor-not-allowed]="this.input!.disabled" 
                    [class.pl-10]="this.input!.icon != ''" 
                    placeholder="{{this.input!.placeholder|lang}}" 
                    *ngSwitchCase="'text'">
                    
                <input 
                    (ngModelChange)="this.input!.onInput($event)" 
                    (focus)="this.input!.onInputFocus()" 
                    [disabled]="this.input!.disabled.toString()" 
                    [(ngModel)]="this.input!.value" 
                    (keydown.enter)="this.input!.standalone ? this.input!.submit() : null" 
                    type="number" 
                    id="input-{{this.input!.id}}" 
                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm block w-full p-2.5 focus:outline-none focus:ring-0" 
                    [class.rounded-l-lg]="!this.input!.prefix" 
                    [class.rounded-r-lg]="!this.input!.suffix" 
                    [class.bg-gray-100]="this.input!.disabled" 
                    [class.cursor-not-allowed]="this.input!.disabled" 
                    [class.pl-10]="this.input!.icon != ''" 
                    placeholder="{{this.input!.placeholder|lang}}" 
                    min="{{$any(this.input).min || null}}" 
                    max="{{$any(this.input).max || null}}" 
                    step="{{$any(this.input).steps || 1}}" 
                    *ngSwitchCase="'number'">

                <input 
                    (ngModelChange)="this.input!.onInput($event)" 
                    (focus)="this.input!.onInputFocus()" 
                    [disabled]="this.input!.disabled.toString()" 
                    [(ngModel)]="this.input!.value" 
                    value="#f6b73c"
                    (keydown.enter)="this.input!.standalone ? this.input!.submit() : null" 
                    type="color" 
                    id="input-{{this.input!.id}}" 
                    class="bg-gray-50 border border-gray-300 w-full h-12 p-2.5 focus:outline-none focus:ring-0" 
                    [class.rounded-l-lg]="!this.input!.prefix" 
                    [class.rounded-r-lg]="!this.input!.suffix" 
                    [class.bg-gray-100]="this.input!.disabled" 
                    [class.cursor-not-allowed]="this.input!.disabled" 
                    [class.pl-10]="this.input!.icon != ''" 
                    placeholder="{{this.input!.placeholder|lang}}" 
                    *ngSwitchCase="'color'">

                <div *ngSwitchCase="'custom-file'">
                    <button
                        type="button"
                        id="input-{{this.input!.id}}"
                        (click)="this.input!.onIconClick()"
                        class="cursor-pointer bg-gray-100 hover:bg-gray-200 border border-gray-300 text-gray-900 text-sm w-full block p-2.5 focus:outline-none focus:ring-0 flex items-center space-x-2 justify-center"
                        [class.rounded-l-lg]="!this.input!.prefix"
                        [class.rounded-r-lg]="!this.input!.suffix"
                        [class.bg-gray-100]="this.input!.disabled"
                        [class.cursor-not-allowed]="this.input!.disabled"
                        [class.pl-10]="this.input!.icon != ''">
                        <ngs-icon [type]="$any(this.input!).buttonIcon"></ngs-icon>
                        <span *ngIf="this.input!.value == null">{{'INPUT_DEFAULT_CHOOSE' | lang}}</span>
                        <span *ngIf="this.input!.value != null">{{$any(this.input).buttonLabel | lang}}</span>
                    </button>
                </div>

                <div *ngSwitchCase="'select'" ngSResize>
                    <button
                        type="button"
                        (click)="$any(this.input).toggle()"
                        id="input-{{this.input!.id}}"
                        class="dropdown-toggle cursor-pointer bg-gray-50 border border-gray-300 text-gray-900 text-sm block w-full p-2.5 focus:outline-none focus:ring-0 flex items-center justify-between"
                        [class.rounded-l-lg]="!this.input!.prefix"
                        [class.rounded-r-lg]="!this.input!.suffix"
                        [class.bg-gray-100]="this.input!.disabled"
                        [class.cursor-not-allowed]="this.input!.disabled"
                        [class.pl-10]="this.input!.icon != ''">
                        <span *ngIf="this.input!.value == null && $any(this.input).emptyValueDefault == ''" class="text-gray-400">{{"INPUT_DEFAULT_CHOOSE" | lang}}</span>
                        <span *ngIf="this.input!.value == null && $any(this.input).emptyValueDefault != ''">{{$any(this.input).emptyValueDefault | lang}}</span>
                        <span *ngIf="this.input!.value != null">{{$any(this.input).selectLabel | lang}}</span>
                        <ngs-icon [type]="'bottom'"></ngs-icon>
                    </button>

                    <div class="absolute z-50 w-full dropdown-menu">
                        <ngs-enter-leave [active]="$any(this.input).open" (onClose)="$any(this.input).open = false" [clickout]="true" [clickoutTarget]="'clickout-target-select'">
                            <div class="relative block bg-gray-50 border border-gray-200 shadow left-0 z-50 rounded-lg w-full overflow-x-clip overflow-y-auto max-h-64">
                                <ul style="z-index: 9999;">
                                    <ng-container *ngFor="let option of $any(this.input).options">
                                        <li *ngIf="option.fixed" class="cursor-pointer select-none p-2 hover:bg-gray-200" (click)="$any(this.input).select(option)">
                                            {{option.label|lang}}
                                        </li>
                                    </ng-container>
                                </ul>
                                <div class="p-2" id="clickout-target-select" *ngIf="$any(this.input).searchbar != null">
                                    <ngs-input [input]="$any(this.input).searchbar"></ngs-input>
                                </div>
                                <ul style="z-index: 9999;">
                                    <li *ngIf="!this.input!.required && $any(this.input).emptyValueDefault == ''" class="cursor-pointer select-none p-2 hover:bg-gray-200 text-gray-400" (click)="$any(this.input).select(null)">
                                        {{"INPUT_DEFAULT_CHOOSE" | lang}}
                                    </li>
                                    <li *ngIf="!this.input!.required && $any(this.input).emptyValueDefault != ''" class="cursor-pointer select-none p-2 hover:bg-gray-200" (click)="$any(this.input).select(null)">
                                        {{$any(this.input).emptyValueDefault | lang}}
                                    </li>
                                    <ng-container *ngFor="let option of $any(this.input).options">
                                        <li *ngIf="!option.hidden && !option.fixed" class="cursor-pointer select-none p-2 hover:bg-gray-200" (click)="$any(this.input).select(option)">
                                            {{option.label|lang}}
                                        </li>
                                    </ng-container>
                                </ul>
                            </div>
                        </ngs-enter-leave>
                    </div>
                </div>

                <input (ngModelChange)="this.input!.onInput($event)" (focus)="this.input!.onInputFocus()" [disabled]="this.input!.disabled.toString()" [(ngModel)]="this.input!.value" (keydown.enter)="this.input!.standalone ? this.input!.submit() : null" type="password" id="input-{{this.input!.id}}" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm block w-full p-2.5 focus:outline-none focus:ring-0" [class.rounded-l-lg]="!this.input!.prefix" [class.rounded-r-lg]="!this.input!.suffix" [class.bg-gray-100]="this.input!.disabled" [class.cursor-not-allowed]="this.input!.disabled" [class.pl-10]="this.input!.icon != ''" placeholder="{{this.input!.placeholder|lang}}" *ngSwitchCase="'password'">

                <textarea (ngModelChange)="this.input!.onInput($event)" (focus)="this.input!.onInputFocus()" [disabled]="this.input!.disabled.toString()" [(ngModel)]="this.input!.value" (keydown.enter)="this.input!.standalone ? this.input!.submit() : null" id="input-{{this.input!.id}}" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm block w-full p-2.5 focus:outline-none focus:ring-0" [class.rounded-l-lg]="!this.input!.prefix" [class.rounded-r-lg]="!this.input!.suffix" [class.bg-gray-100]="this.input!.disabled" [class.cursor-not-allowed]="this.input!.disabled" [class.pl-10]="this.input!.icon != ''" placeholder="{{this.input!.placeholder|lang}}" rows="{{$any(this.input).rows || 3}}" *ngSwitchCase="'textarea'"></textarea>

                <div *ngSwitchCase="'date'" ngSResize>
                    <input (ngModelChange)="this.input!.onInput($event)" (click)="$any(this.input!).openDatepicker();" [disabled]="this.input!.disabled.toString()" [(ngModel)]="this.input!.value" (keydown.enter)="this.input!.standalone ? this.input!.submit() : null" type="date" id="input-{{this.input!.id}}" class="dropdown-toggle bg-gray-50 border border-gray-300 text-gray-900 text-sm block w-full p-2.5 focus:outline-none focus:ring-0 pointer-cursor" [class.rounded-l-lg]="!this.input!.prefix" [class.rounded-r-lg]="!this.input!.suffix" [class.bg-gray-100]="this.input!.disabled" [class.cursor-not-allowed]="this.input!.disabled" [class.pl-10]="this.input!.icon != ''" placeholder="{{this.input!.placeholder|lang}}" autocomplete="off">

                    <div class="absolute z-50 w-min dropdown-menu">
                        <ngs-enter-leave [active]="$any(this.input).open" (onClose)="$any(this.input).open = false" [clickout]="true">
                            <div class="relative block bg-white" id="clickout-target">
                                <ngs-datepicker [selected]="this.input!.value" [min]="$any(this.input!).min" [max]="$any(this.input!).max" [blocked]="$any(this.input!).blocked" (onSelected)="this.input!.value = $event; $any(this.input).open = false; this.input.onInput($event)"></ngs-datepicker>
                            </div>
                        </ngs-enter-leave>                        
                    </div>
                </div>
            </ng-container>
        </div>

        <span class="inline-flex items-center px-3 text-sm text-gray-900 bg-gray-200 border border-l-0 border-gray-300 rounded-r-md" *ngIf="this.input!.suffix">
            {{this.input!.suffix | lang}}
        </span>
    </div>

    <p class="mt-2 text-sm text-red-600" *ngIf="this.input!.mark != ''">{{this.input!.mark | lang}}</p>
</ng-container>